options:
  machineType: 'N1_HIGHCPU_32'
timeout: 1200s
steps:
  - name: 'us.gcr.io/current-production/core-builder:0.0.81'
    entrypoint: '/environment.sh'
    secretEnv: ['GITRSA', 'NPMRC', 'KNOWN_HOSTS','DOCKER_KEY']
    volumes:
      - name: 'ssh'
        path: /root/.ssh
      - name: 'root'
        path: /root
  - name: 'gcr.io/cloud-builders/git'
    args:
      - clone
      - git@github.com:finco-services/fake-gcs-server.git
      - fake-gcs-server
    volumes:
      - name: 'ssh'
        path: /root/.ssh
      - name: 'root'
        path: /root
  - name: 'us.gcr.io/current-production/core-builder:0.0.81'
    entrypoint: 'mvn'
    args: ['--batch-mode', '-DskipTests=true','-Darguments="-Dmaven.javadoc.skip=true"', '-Dmaven.javadoc.skip=true', '-Darguments=-DskipTests', '-DautoVersionSubmodules=true','release:prepare', 'release:perform']
    dir: 'fake-gcs-server'
    volumes:
      - name: 'ssh'
        path: /root/.ssh
      - name: 'root'
        path: /root
secrets:
  - kmsKeyName: projects/current-production/locations/global/keyRings/build/cryptoKeys/npm
    secretEnv:
      NPMRC: CiQAyY23fXiLxN3ifGP55LV6USUrJssriDD+vU1g+lj+iMmE7qUSbwA65roG/YxzBzRKh+5P031TklMgZ4rmkauFh/0pvPZ9Js+1r8xD1wBv8eEI2TWH7kxvDKsnT6Y/5Zy1oGiTlaHkuf3MJd9/tWyZrWZP8K0HP9o+pDOGazRUCyKgSZxMIQxadgV0gA5KNG8KHSjPnQ==
  - kmsKeyName: projects/current-production/locations/global/keyRings/build/cryptoKeys/github
    secretEnv:
      GITRSA: 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
  - kmsKeyName: projects/current-production/locations/global/keyRings/build/cryptoKeys/known_hosts
    secretEnv:
      KNOWN_HOSTS: CiQA5btHwE/R9zn2P1ZxjDF7iA1sIqKLRtwFK67Xvhk+1gXuGRMSsgMA+vFmGBf8Nw1LBBimRzSn45+uORuUDDv6KAwe+/aZL+uA8015uZDDN6a7GeaoXhAJNWHZ7xDu6yTIDB8/A9dv8EnHGIH9d0j7oq6lDdOYLPnlArTin8xr04O0T0e+kBx5jMNMFRbGehWCSAcG9jW5kZIEYiccHZuZc1IN6qqQSc+gi2gabKQuue4cDCKE2c7qlqkUpS4yqiMiPYpK3bOSTgVTdtDMM1zseHkR6zoiv/glIb5im9Ae/XT1xK4z/h0v7WVFBtIAP88/TzWLVXQV+snAtRFGjvhTEQ63wW6iTWkQTR1ZHwwK5GhvSYU+WNDe/wj6fDlG6U8ZEaaRGw9NO2l2FnVqbKbmPo915Cg3dPWz7ukFeWuc3R4kwcB2v5v34giwX9fTaFHJHYr9ZJt+EsgXgV/Eo4Wr8ndybtHsmjCMq+4YVEEKgJz/NQQ0cI8xpZPlI+pb8VtyyKt3j4IexyDSC8KaryX9wzkHMQ/s2vvxkUxcsVKDA+Ozer44llYxz4e64G8JzGbgaM13JIzK190hcn9P7dsbxrI3jPqyT6WXm7cwghy/f3UAGASwz+bLSw==
  - kmsKeyName: projects/current-production/locations/global/keyRings/build/cryptoKeys/docker
    secretEnv:
      DOCKER_KEY: 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